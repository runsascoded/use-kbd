import { Kbd, ShortcutsModal } from 'use-kbd'
import { A } from '../components/A'
import { DemoThumbnail } from '../components/DemoThumbnail'
import { DemoTitle } from '../components/DemoTitle'
import { Command, Ctrl, Option, Shift } from '../components/ModifierIconsWithTooltips'

# use-kbd

[![npm version](https://img.shields.io/npm/v/use-kbd.svg)](https://www.npmjs.com/package/use-kbd)

Add keyboard shortcuts, navigation, omnibar to React apps:

1. **Drop-in UI components** ([`ShortcutsModal`], [`Omnibar`], [`SequenceModal`]) at the App level
2. **Minimal-boilerplate action registration** via [`useAction`] hook, colocated with handlers
3. **CSS variables** for easy theming customization

<div className="hint">
  Press <Kbd action="global:0-help" clickable /> for shortcuts or <Kbd action="global:1-omnibar" clickable /> for command palette.
</div>

## Demos

<div className="demos-list">
  <div className="demo-item">
    <DemoThumbnail demo="table" />
    <div className="demo-content">
      <DemoTitle to="/table" source="TableDemo.tsx">Data Table</DemoTitle>
      <p>Sortable, paginated table with row selection (inspired by [Superhuman]).</p>
      <ul>
        <li><strong>Custom renderers in modal</strong>: two-column layout for fwd/back shortcuts</li>
        <li><strong>Modifier key examples</strong>: <Ctrl/><Shift/><Option/><Command/></li>
      </ul>
    </div>
  </div>
  <div className="demo-item">
    <DemoThumbnail demo="canvas" />
    <div className="demo-content">
      <DemoTitle to="/canvas" source="CanvasDemo.tsx">Canvas</DemoTitle>
      <p>Drawing app with tools and color palette.</p>
      <ul>
        <li><strong>Single-key shortcuts</strong> for tools, colors, undo/redo</li>
        <li><strong>Custom remove-button styling</strong>: inline "Ã—" (instead of corner badge)</li>
      </ul>
    </div>
  </div>
  <div className="demo-item">
    <DemoThumbnail demo="calendar" />
    <div className="demo-content">
      <DemoTitle to="/calendar" source="CalendarDemo.tsx">Calendar</DemoTitle>
      <p>Month/week/day views with event management.</p>
      <ul>
        <li><strong>Multiple bindings per action</strong>: arrow keys + Vim-style HJKL</li>
        <li><strong>Sequence shortcuts</strong>: `g m` for month, `g w` for week, `g d` for day, etc.</li>
      </ul>
    </div>
  </div>
</div>

## Quick Start

```tsx
import { HotkeysProvider, ShortcutsModal, Omnibar, SequenceModal, useAction } from 'use-kbd'
import 'use-kbd/styles.css'

function App() {
  return (
    <HotkeysProvider>
      <Dashboard />
      <ShortcutsModal />
      <Omnibar />
      <SequenceModal />
    </HotkeysProvider>
  )
}

function Dashboard() {
  const { save } = useDocument()

  useAction('doc:save', {
    label: 'Save document',
    group: 'Document',
    defaultBindings: ['meta+s'],
    handler: save,
  })

  return <Editor />
}
```

## Features

- **Editable Shortcuts** - Click any shortcut in modal to rebind
- **Global Omnibar** - Search all actions across pages
- **Sequences** - Multi-key shortcuts like <Kbd action="link:/" first />
- **ActionLink** - Navigation links auto-register as omnibar actions
- **Persisted Bindings** - Custom shortcuts saved to localStorage

## Inspiration

- macOS and GDrive menu search
- [Superhuman] omnibar
- Android searchable settings
- [Vimium] keyboard-driven browsing

## Live Examples

Try the library in action:
- [ctbk.dev]
- [awair.runsascoded.com]

[`ShortcutsModal`]: https://github.com/runsascoded/use-kbd/blob/main/src/ShortcutsModal.tsx
[`Omnibar`]: https://github.com/runsascoded/use-kbd/blob/main/src/Omnibar.tsx
[`SequenceModal`]: https://github.com/runsascoded/use-kbd/blob/main/src/SequenceModal.tsx
[`useAction`]: https://github.com/runsascoded/use-kbd/blob/main/src/useAction.ts
[Superhuman]: https://superhuman.com
[Vimium]: https://github.com/philc/vimium
[ctbk.dev]: https://ctbk.dev
[awair.runsascoded.com]: https://awair.runsascoded.com

<ShortcutsModal editable groupOrder={['Global', 'Navigation']} />
