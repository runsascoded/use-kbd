{"version":3,"sources":["../src/utils.ts","../src/useHotkeys.ts","../src/useRecordHotkey.ts","../src/useEditableHotkeys.ts","../src/KeybindingEditor.tsx","../src/ShortcutsModal.tsx"],"names":["useRef","useEffect","target","useCallback","useState","display","useMemo","jsxs","jsx","Fragment"],"mappings":"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","file":"index.cjs","sourcesContent":["import type { KeyCombination, KeyCombinationDisplay } from './types'\n\n/**\n * Detect if running on macOS\n */\nexport function isMac(): boolean {\n  if (typeof navigator === 'undefined') return false\n  return /Mac|iPod|iPhone|iPad/.test(navigator.platform)\n}\n\n/**\n * Normalize a key name to a canonical form\n */\nexport function normalizeKey(key: string): string {\n  // Handle special keys\n  const keyMap: Record<string, string> = {\n    ' ': 'space',\n    'Escape': 'escape',\n    'Enter': 'enter',\n    'Tab': 'tab',\n    'Backspace': 'backspace',\n    'Delete': 'delete',\n    'ArrowUp': 'arrowup',\n    'ArrowDown': 'arrowdown',\n    'ArrowLeft': 'arrowleft',\n    'ArrowRight': 'arrowright',\n    'Home': 'home',\n    'End': 'end',\n    'PageUp': 'pageup',\n    'PageDown': 'pagedown',\n  }\n\n  if (key in keyMap) {\n    return keyMap[key]\n  }\n\n  // Single characters to lowercase\n  if (key.length === 1) {\n    return key.toLowerCase()\n  }\n\n  // Function keys (F1-F12)\n  if (/^F\\d{1,2}$/.test(key)) {\n    return key.toLowerCase()\n  }\n\n  return key.toLowerCase()\n}\n\n/**\n * Format a key for display (platform-aware)\n */\nexport function formatKeyForDisplay(key: string): string {\n  const displayMap: Record<string, string> = {\n    'space': 'Space',\n    'escape': 'Esc',\n    'enter': '↵',\n    'tab': 'Tab',\n    'backspace': '⌫',\n    'delete': 'Del',\n    'arrowup': '↑',\n    'arrowdown': '↓',\n    'arrowleft': '←',\n    'arrowright': '→',\n    'home': 'Home',\n    'end': 'End',\n    'pageup': 'PgUp',\n    'pagedown': 'PgDn',\n  }\n\n  if (key in displayMap) {\n    return displayMap[key]\n  }\n\n  // Function keys\n  if (/^f\\d{1,2}$/.test(key)) {\n    return key.toUpperCase()\n  }\n\n  // Single letter - uppercase for display\n  if (key.length === 1) {\n    return key.toUpperCase()\n  }\n\n  return key\n}\n\n/**\n * Convert a KeyCombination to display format\n */\nexport function formatCombination(combo: KeyCombination): KeyCombinationDisplay {\n  const mac = isMac()\n  const parts: string[] = []\n  const idParts: string[] = []\n\n  // Order: Ctrl/Cmd, Alt/Option, Shift, Key\n  if (combo.modifiers.ctrl) {\n    parts.push(mac ? '⌃' : 'Ctrl')\n    idParts.push('ctrl')\n  }\n  if (combo.modifiers.meta) {\n    parts.push(mac ? '⌘' : 'Win')\n    idParts.push('meta')\n  }\n  if (combo.modifiers.alt) {\n    parts.push(mac ? '⌥' : 'Alt')\n    idParts.push('alt')\n  }\n  if (combo.modifiers.shift) {\n    parts.push(mac ? '⇧' : 'Shift')\n    idParts.push('shift')\n  }\n\n  parts.push(formatKeyForDisplay(combo.key))\n  idParts.push(combo.key)\n\n  return {\n    display: mac ? parts.join('') : parts.join('+'),\n    id: idParts.join('+'),\n  }\n}\n\n/**\n * Check if a key is a modifier key\n */\nexport function isModifierKey(key: string): boolean {\n  return ['Control', 'Alt', 'Shift', 'Meta'].includes(key)\n}\n\n/**\n * Characters that require shift to type (US keyboard layout)\n * When matching these keys, we should ignore shiftKey mismatch\n */\nconst SHIFTED_CHARS = new Set([\n  '~', '!', '@', '#', '$', '%', '^', '&', '*', '(', ')',\n  '_', '+', '{', '}', '|', ':', '\"', '<', '>', '?',\n])\n\n/**\n * Check if a key is a shifted character (requires shift to type)\n */\nexport function isShiftedChar(key: string): boolean {\n  return SHIFTED_CHARS.has(key)\n}\n\n/**\n * Parse a combination ID back to a KeyCombination\n */\nexport function parseCombinationId(id: string): KeyCombination {\n  const parts = id.toLowerCase().split('+')\n  const key = parts[parts.length - 1]\n\n  return {\n    key,\n    modifiers: {\n      ctrl: parts.includes('ctrl'),\n      alt: parts.includes('alt'),\n      shift: parts.includes('shift'),\n      meta: parts.includes('meta'),\n    },\n  }\n}\n","import { useEffect, useRef } from 'react'\nimport { isModifierKey, isShiftedChar, normalizeKey } from './utils'\n\n/**\n * Hotkey definition - maps key combinations to action names\n */\nexport type HotkeyMap = Record<string, string | string[]>\n\n/**\n * Handler map - maps action names to handler functions\n */\nexport type HandlerMap = Record<string, (e: KeyboardEvent) => void>\n\nexport interface UseHotkeysOptions {\n  /** Whether hotkeys are enabled (default: true) */\n  enabled?: boolean\n  /** Element to attach listeners to (default: window) */\n  target?: HTMLElement | Window | null\n  /** Prevent default on matched hotkeys (default: true) */\n  preventDefault?: boolean\n  /** Stop propagation on matched hotkeys (default: true) */\n  stopPropagation?: boolean\n  /** Enable hotkeys even when focused on input/textarea/select (default: false) */\n  enableOnFormTags?: boolean\n}\n\n/**\n * Parse a hotkey string into its components\n * e.g., \"ctrl+shift+k\" -> { ctrl: true, shift: true, key: \"k\" }\n */\nfunction parseHotkey(hotkey: string): {\n  ctrl: boolean\n  alt: boolean\n  shift: boolean\n  meta: boolean\n  key: string\n} {\n  const parts = hotkey.toLowerCase().split('+')\n  const key = parts[parts.length - 1]\n\n  return {\n    ctrl: parts.includes('ctrl') || parts.includes('control'),\n    alt: parts.includes('alt') || parts.includes('option'),\n    shift: parts.includes('shift'),\n    meta: parts.includes('meta') || parts.includes('cmd') || parts.includes('command'),\n    key,\n  }\n}\n\n/**\n * Check if a keyboard event matches a hotkey definition\n */\nfunction matchesHotkey(\n  e: KeyboardEvent,\n  hotkey: { ctrl: boolean; alt: boolean; shift: boolean; meta: boolean; key: string }\n): boolean {\n  const eventKey = normalizeKey(e.key)\n\n  // For shifted characters (like ?, !, @), ignore shift key mismatch\n  // since pressing these keys inherently requires shift\n  const shiftMatches = isShiftedChar(e.key)\n    ? (hotkey.shift ? e.shiftKey : true)  // If hotkey wants shift, event must have it; otherwise ignore\n    : e.shiftKey === hotkey.shift\n\n  return (\n    e.ctrlKey === hotkey.ctrl &&\n    e.altKey === hotkey.alt &&\n    shiftMatches &&\n    e.metaKey === hotkey.meta &&\n    eventKey === hotkey.key\n  )\n}\n\n/**\n * Hook to register keyboard shortcuts.\n *\n * @example\n * ```tsx\n * useHotkeys(\n *   {\n *     't': 'setTemp',\n *     'c': 'setCO2',\n *     'ctrl+s': 'save',\n *     'shift+?': 'showHelp',\n *   },\n *   {\n *     setTemp: () => setMetric('temp'),\n *     setCO2: () => setMetric('co2'),\n *     save: () => handleSave(),\n *     showHelp: () => setShowHelp(true),\n *   }\n * )\n * ```\n */\nexport function useHotkeys(\n  keymap: HotkeyMap,\n  handlers: HandlerMap,\n  options: UseHotkeysOptions = {}\n): void {\n  const {\n    enabled = true,\n    target,\n    preventDefault = true,\n    stopPropagation = true,\n    enableOnFormTags = false,\n  } = options\n\n  // Use refs for handlers to avoid re-attaching listeners when handlers change\n  const handlersRef = useRef(handlers)\n  handlersRef.current = handlers\n\n  const keymapRef = useRef(keymap)\n  keymapRef.current = keymap\n\n  useEffect(() => {\n    if (!enabled) return\n\n    const targetElement = target ?? window\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      // Skip if focused on form element (unless enabled)\n      if (!enableOnFormTags) {\n        const target = e.target as HTMLElement\n        if (\n          target instanceof HTMLInputElement ||\n          target instanceof HTMLTextAreaElement ||\n          target instanceof HTMLSelectElement ||\n          target.isContentEditable\n        ) {\n          return\n        }\n      }\n\n      // Skip modifier-only keypresses\n      if (isModifierKey(e.key)) {\n        return\n      }\n\n      // Check each hotkey in the map\n      for (const [hotkeyStr, actionName] of Object.entries(keymapRef.current)) {\n        const hotkey = parseHotkey(hotkeyStr)\n\n        if (matchesHotkey(e, hotkey)) {\n          // Find the handler(s) for this action\n          const actions = Array.isArray(actionName) ? actionName : [actionName]\n\n          for (const action of actions) {\n            const handler = handlersRef.current[action]\n            if (handler) {\n              if (preventDefault) {\n                e.preventDefault()\n              }\n              if (stopPropagation) {\n                e.stopPropagation()\n              }\n              handler(e)\n              return // Only handle first match\n            }\n          }\n        }\n      }\n    }\n\n    targetElement.addEventListener('keydown', handleKeyDown as EventListener)\n\n    return () => {\n      targetElement.removeEventListener('keydown', handleKeyDown as EventListener)\n    }\n  }, [enabled, target, preventDefault, stopPropagation, enableOnFormTags])\n}\n","import { useCallback, useEffect, useRef, useState } from 'react'\nimport type { KeyCombination, RecordHotkeyOptions, RecordHotkeyResult } from './types'\nimport { formatCombination, isModifierKey, normalizeKey } from './utils'\n\n/** Store callback in ref to avoid effect re-runs when callback changes */\nfunction useEventCallback<T extends (...args: never[]) => unknown>(fn: T | undefined): T | undefined {\n  const ref = useRef(fn)\n  ref.current = fn\n  return useCallback(((...args) => ref.current?.(...args)) as T, [])\n}\n\n/**\n * Hook to record a keyboard shortcut from user input.\n *\n * When recording starts, captures the next key combination the user presses.\n * Recording completes when all keys are released after pressing a non-modifier key.\n *\n * @example\n * ```tsx\n * function KeybindingEditor() {\n *   const { isRecording, startRecording, combination, display, activeKeys } = useRecordHotkey({\n *     onCapture: (combo, display) => {\n *       console.log('Captured:', display.display)\n *       saveKeybinding(display.id)\n *     }\n *   })\n *\n *   return (\n *     <button onClick={() => startRecording()}>\n *       {isRecording\n *         ? (activeKeys ? formatCombination(activeKeys).display : 'Press keys...')\n *         : (display?.display ?? 'Click to set')}\n *     </button>\n *   )\n * }\n * ```\n */\nexport function useRecordHotkey(options: RecordHotkeyOptions = {}): RecordHotkeyResult {\n  const { onCapture: onCaptureProp, onCancel: onCancelProp, preventDefault = true } = options\n\n  // Stabilize callbacks to avoid effect re-runs\n  const onCapture = useEventCallback(onCaptureProp)\n  const onCancel = useEventCallback(onCancelProp)\n\n  const [isRecording, setIsRecording] = useState(false)\n  const [combination, setCombination] = useState<KeyCombination | null>(null)\n  const [activeKeys, setActiveKeys] = useState<KeyCombination | null>(null)\n\n  // Track pressed keys during recording\n  const pressedKeysRef = useRef<Set<string>>(new Set())\n  const hasNonModifierRef = useRef(false)\n  const currentComboRef = useRef<KeyCombination | null>(null)\n\n  const cancel = useCallback(() => {\n    setIsRecording(false)\n    setActiveKeys(null)\n    pressedKeysRef.current.clear()\n    hasNonModifierRef.current = false\n    currentComboRef.current = null\n    onCancel?.()\n  }, [onCancel])\n\n  const startRecording = useCallback(() => {\n    setIsRecording(true)\n    setCombination(null)\n    setActiveKeys(null)\n    pressedKeysRef.current.clear()\n    hasNonModifierRef.current = false\n    currentComboRef.current = null\n\n    // Return cancel function\n    return cancel\n  }, [cancel])\n\n  useEffect(() => {\n    if (!isRecording) return\n\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (preventDefault) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n\n      const key = e.key\n      pressedKeysRef.current.add(key)\n\n      // Build current combination from pressed keys\n      const combo: KeyCombination = {\n        key: '',\n        modifiers: {\n          ctrl: e.ctrlKey,\n          alt: e.altKey,\n          shift: e.shiftKey,\n          meta: e.metaKey,\n        },\n      }\n\n      // Find the non-modifier key\n      for (const k of pressedKeysRef.current) {\n        if (!isModifierKey(k)) {\n          combo.key = normalizeKey(k)\n          hasNonModifierRef.current = true\n          break\n        }\n      }\n\n      // Only update if we have a non-modifier key\n      if (combo.key) {\n        currentComboRef.current = combo\n        setActiveKeys(combo)\n      } else {\n        // Show modifiers being held\n        setActiveKeys({\n          key: '',\n          modifiers: combo.modifiers,\n        })\n      }\n    }\n\n    const handleKeyUp = (e: KeyboardEvent) => {\n      if (preventDefault) {\n        e.preventDefault()\n        e.stopPropagation()\n      }\n\n      pressedKeysRef.current.delete(e.key)\n\n      // On Mac, releasing Meta swallows other keyup events, so check if we have a valid\n      // combination when Meta is released (or when all keys are released)\n      const shouldComplete =\n        (pressedKeysRef.current.size === 0) ||\n        (e.key === 'Meta' && hasNonModifierRef.current)\n\n      if (shouldComplete && hasNonModifierRef.current && currentComboRef.current) {\n        const combo = currentComboRef.current\n        const display = formatCombination(combo)\n\n        // Clear state before callbacks to avoid re-entrancy issues\n        pressedKeysRef.current.clear()\n        hasNonModifierRef.current = false\n        currentComboRef.current = null\n\n        setCombination(combo)\n        setIsRecording(false)\n        setActiveKeys(null)\n\n        onCapture?.(combo, display)\n      }\n    }\n\n    // Capture phase to intercept before other handlers\n    window.addEventListener('keydown', handleKeyDown, true)\n    window.addEventListener('keyup', handleKeyUp, true)\n\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown, true)\n      window.removeEventListener('keyup', handleKeyUp, true)\n    }\n  }, [isRecording, preventDefault])\n\n  const display = combination ? formatCombination(combination) : null\n\n  return {\n    isRecording,\n    startRecording,\n    cancel,\n    combination,\n    display,\n    activeKeys,\n  }\n}\n","import { useCallback, useEffect, useMemo, useState } from 'react'\nimport { useHotkeys, HotkeyMap, HandlerMap, UseHotkeysOptions } from './useHotkeys'\n\nexport interface UseEditableHotkeysOptions extends UseHotkeysOptions {\n  /** localStorage key for persistence (omit to disable persistence) */\n  storageKey?: string\n}\n\nexport interface UseEditableHotkeysResult {\n  /** Current keymap (defaults merged with user overrides) */\n  keymap: HotkeyMap\n  /** Update a single keybinding */\n  setBinding: (action: string, key: string) => void\n  /** Update multiple keybindings at once */\n  setKeymap: (overrides: Partial<HotkeyMap>) => void\n  /** Reset all overrides to defaults */\n  reset: () => void\n  /** User overrides only (for inspection/export) */\n  overrides: Partial<HotkeyMap>\n}\n\n/**\n * Wraps useHotkeys with editable keybindings and optional persistence.\n *\n * @example\n * ```tsx\n * const { keymap, setBinding, reset } = useEditableHotkeys(\n *   { 't': 'setTemp', 'c': 'setCO2' },\n *   { setTemp: () => setMetric('temp'), setCO2: () => setMetric('co2') },\n *   { storageKey: 'app-hotkeys' }\n * )\n * ```\n */\nexport function useEditableHotkeys(\n  defaults: HotkeyMap,\n  handlers: HandlerMap,\n  options: UseEditableHotkeysOptions = {},\n): UseEditableHotkeysResult {\n  const { storageKey, ...hotkeyOptions } = options\n\n  // Load overrides from storage on mount\n  const [overrides, setOverrides] = useState<Partial<HotkeyMap>>(() => {\n    if (!storageKey || typeof window === 'undefined') return {}\n    try {\n      const stored = localStorage.getItem(storageKey)\n      return stored ? JSON.parse(stored) : {}\n    } catch {\n      return {}\n    }\n  })\n\n  // Persist overrides to storage\n  useEffect(() => {\n    if (!storageKey || typeof window === 'undefined') return\n    try {\n      if (Object.keys(overrides).length === 0) {\n        localStorage.removeItem(storageKey)\n      } else {\n        localStorage.setItem(storageKey, JSON.stringify(overrides))\n      }\n    } catch {\n      // Ignore storage errors\n    }\n  }, [storageKey, overrides])\n\n  // Merge defaults with overrides (invert the map: action -> key becomes key -> action)\n  const keymap = useMemo(() => {\n    // Build action -> key map from defaults\n    const actionToKey: Record<string, string> = {}\n    for (const [key, action] of Object.entries(defaults)) {\n      const actions = Array.isArray(action) ? action : [action]\n      for (const a of actions) {\n        actionToKey[a] = key\n      }\n    }\n\n    // Apply overrides (key -> action)\n    for (const [key, action] of Object.entries(overrides)) {\n      if (action === undefined) continue\n      const actions = Array.isArray(action) ? action : [action]\n      for (const a of actions) {\n        actionToKey[a] = key\n      }\n    }\n\n    // Rebuild key -> action map\n    const result: HotkeyMap = {}\n    for (const [action, key] of Object.entries(actionToKey)) {\n      if (result[key]) {\n        const existing = result[key]\n        result[key] = Array.isArray(existing) ? [...existing, action] : [existing, action]\n      } else {\n        result[key] = action\n      }\n    }\n\n    return result\n  }, [defaults, overrides])\n\n  // Register hotkeys\n  useHotkeys(keymap, handlers, hotkeyOptions)\n\n  const setBinding = useCallback((action: string, key: string) => {\n    setOverrides((prev) => ({ ...prev, [key]: action }))\n  }, [])\n\n  const setKeymap = useCallback((newOverrides: Partial<HotkeyMap>) => {\n    setOverrides((prev) => ({ ...prev, ...newOverrides }))\n  }, [])\n\n  const reset = useCallback(() => {\n    setOverrides({})\n  }, [])\n\n  return { keymap, setBinding, setKeymap, reset, overrides }\n}\n","import { useCallback, useMemo, useState } from 'react'\nimport type { HotkeyMap } from './useHotkeys'\nimport type { KeyCombination, KeyCombinationDisplay } from './types'\nimport { useRecordHotkey } from './useRecordHotkey'\nimport { formatCombination, parseCombinationId } from './utils'\n\nexport interface KeybindingEditorProps {\n  /** Current keymap */\n  keymap: HotkeyMap\n  /** Default keymap (for reset functionality) */\n  defaults: HotkeyMap\n  /** Descriptions for actions */\n  descriptions?: Record<string, string>\n  /** Called when a binding changes */\n  onChange: (action: string, key: string) => void\n  /** Called when reset is requested */\n  onReset?: () => void\n  /** CSS class for the container */\n  className?: string\n  /** Custom render function */\n  children?: (props: KeybindingEditorRenderProps) => React.ReactNode\n}\n\nexport interface KeybindingEditorRenderProps {\n  bindings: BindingInfo[]\n  editingAction: string | null\n  activeKeys: KeyCombination | null\n  startEditing: (action: string) => void\n  cancelEditing: () => void\n  reset: () => void\n  conflicts: Map<string, string[]>\n}\n\nexport interface BindingInfo {\n  action: string\n  key: string\n  display: KeyCombinationDisplay\n  description: string\n  isDefault: boolean\n  hasConflict: boolean\n}\n\n/**\n * Build action -> key lookup from keymap\n */\nfunction buildActionMap(keymap: HotkeyMap): Map<string, string> {\n  const map = new Map<string, string>()\n  for (const [key, actionOrActions] of Object.entries(keymap)) {\n    const actions = Array.isArray(actionOrActions) ? actionOrActions : [actionOrActions]\n    for (const action of actions) {\n      map.set(action, key)\n    }\n  }\n  return map\n}\n\n/**\n * Find conflicts (multiple actions bound to same key)\n */\nfunction findConflicts(keymap: HotkeyMap): Map<string, string[]> {\n  const keyToActions = new Map<string, string[]>()\n\n  for (const [key, actionOrActions] of Object.entries(keymap)) {\n    const actions = Array.isArray(actionOrActions) ? actionOrActions : [actionOrActions]\n    const existing = keyToActions.get(key) ?? []\n    keyToActions.set(key, [...existing, ...actions])\n  }\n\n  // Only keep entries with conflicts (multiple actions)\n  const conflicts = new Map<string, string[]>()\n  for (const [key, actions] of keyToActions) {\n    if (actions.length > 1) {\n      conflicts.set(key, actions)\n    }\n  }\n\n  return conflicts\n}\n\n/**\n * UI component for editing keybindings.\n *\n * @example\n * ```tsx\n * <KeybindingEditor\n *   keymap={keymap}\n *   defaults={DEFAULT_KEYMAP}\n *   descriptions={{ save: 'Save document' }}\n *   onChange={(action, key) => setBinding(action, key)}\n *   onReset={() => reset()}\n * />\n * ```\n */\nexport function KeybindingEditor({\n  keymap,\n  defaults,\n  descriptions,\n  onChange,\n  onReset,\n  className,\n  children,\n}: KeybindingEditorProps) {\n  const [editingAction, setEditingAction] = useState<string | null>(null)\n\n  const actionMap = useMemo(() => buildActionMap(keymap), [keymap])\n  const defaultActionMap = useMemo(() => buildActionMap(defaults), [defaults])\n  const conflicts = useMemo(() => findConflicts(keymap), [keymap])\n\n  const { isRecording, startRecording, cancel, activeKeys } = useRecordHotkey({\n    onCapture: useCallback(\n      (_combo: KeyCombination, display: KeyCombinationDisplay) => {\n        if (editingAction) {\n          onChange(editingAction, display.id)\n          setEditingAction(null)\n        }\n      },\n      [editingAction, onChange],\n    ),\n    onCancel: useCallback(() => {\n      setEditingAction(null)\n    }, []),\n  })\n\n  const startEditing = useCallback(\n    (action: string) => {\n      setEditingAction(action)\n      startRecording()\n    },\n    [startRecording],\n  )\n\n  const cancelEditing = useCallback(() => {\n    cancel()\n    setEditingAction(null)\n  }, [cancel])\n\n  const reset = useCallback(() => {\n    onReset?.()\n  }, [onReset])\n\n  // Build binding info for all actions\n  const bindings: BindingInfo[] = useMemo(() => {\n    const allActions = new Set([...actionMap.keys(), ...defaultActionMap.keys()])\n\n    return Array.from(allActions).map((action) => {\n      const key = actionMap.get(action) ?? defaultActionMap.get(action) ?? ''\n      const defaultKey = defaultActionMap.get(action) ?? ''\n      const combo = parseCombinationId(key)\n      const display = formatCombination(combo)\n      const conflictActions = conflicts.get(key)\n\n      return {\n        action,\n        key,\n        display,\n        description: descriptions?.[action] ?? action,\n        isDefault: key === defaultKey,\n        hasConflict: conflictActions !== undefined && conflictActions.length > 1,\n      }\n    }).sort((a, b) => a.action.localeCompare(b.action))\n  }, [actionMap, defaultActionMap, descriptions, conflicts])\n\n  // Custom render\n  if (children) {\n    return (\n      <>\n        {children({\n          bindings,\n          editingAction,\n          activeKeys,\n          startEditing,\n          cancelEditing,\n          reset,\n          conflicts,\n        })}\n      </>\n    )\n  }\n\n  // Default render\n  return (\n    <div className={className}>\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n        <h3 style={{ margin: 0 }}>Keybindings</h3>\n        {onReset && (\n          <button\n            onClick={reset}\n            style={{\n              padding: '6px 12px',\n              backgroundColor: '#f5f5f5',\n              border: '1px solid #ddd',\n              borderRadius: '4px',\n              cursor: 'pointer',\n            }}\n          >\n            Reset to defaults\n          </button>\n        )}\n      </div>\n\n      <table style={{ width: '100%', borderCollapse: 'collapse' }}>\n        <thead>\n          <tr>\n            <th style={{ textAlign: 'left', padding: '8px', borderBottom: '2px solid #ddd' }}>Action</th>\n            <th style={{ textAlign: 'left', padding: '8px', borderBottom: '2px solid #ddd' }}>Keybinding</th>\n            <th style={{ width: '80px', padding: '8px', borderBottom: '2px solid #ddd' }}></th>\n          </tr>\n        </thead>\n        <tbody>\n          {bindings.map(({ action, display, description, isDefault, hasConflict }) => {\n            const isEditing = editingAction === action\n\n            return (\n              <tr key={action} style={{ backgroundColor: hasConflict ? '#fff3cd' : undefined }}>\n                <td style={{ padding: '8px', borderBottom: '1px solid #eee' }}>\n                  {description}\n                  {!isDefault && (\n                    <span style={{ marginLeft: '8px', fontSize: '0.75rem', color: '#666' }}>(modified)</span>\n                  )}\n                </td>\n                <td style={{ padding: '8px', borderBottom: '1px solid #eee' }}>\n                  {isEditing ? (\n                    <kbd\n                      style={{\n                        backgroundColor: '#e3f2fd',\n                        padding: '4px 8px',\n                        borderRadius: '4px',\n                        border: '2px solid #2196f3',\n                        fontFamily: 'monospace',\n                      }}\n                    >\n                      {activeKeys ? formatCombination(activeKeys).display : 'Press keys...'}\n                    </kbd>\n                  ) : (\n                    <kbd\n                      style={{\n                        backgroundColor: '#f5f5f5',\n                        padding: '4px 8px',\n                        borderRadius: '4px',\n                        border: '1px solid #ddd',\n                        fontFamily: 'monospace',\n                      }}\n                    >\n                      {display.display}\n                    </kbd>\n                  )}\n                  {hasConflict && !isEditing && (\n                    <span style={{ marginLeft: '8px', color: '#856404', fontSize: '0.75rem' }}>⚠ Conflict</span>\n                  )}\n                </td>\n                <td style={{ padding: '8px', borderBottom: '1px solid #eee', textAlign: 'center' }}>\n                  {isEditing ? (\n                    <button\n                      onClick={cancelEditing}\n                      style={{\n                        padding: '4px 8px',\n                        backgroundColor: '#f5f5f5',\n                        border: '1px solid #ddd',\n                        borderRadius: '4px',\n                        cursor: 'pointer',\n                        fontSize: '0.875rem',\n                      }}\n                    >\n                      Cancel\n                    </button>\n                  ) : (\n                    <button\n                      onClick={() => startEditing(action)}\n                      disabled={isRecording}\n                      style={{\n                        padding: '4px 8px',\n                        backgroundColor: '#f5f5f5',\n                        border: '1px solid #ddd',\n                        borderRadius: '4px',\n                        cursor: isRecording ? 'not-allowed' : 'pointer',\n                        fontSize: '0.875rem',\n                        opacity: isRecording ? 0.5 : 1,\n                      }}\n                    >\n                      Edit\n                    </button>\n                  )}\n                </td>\n              </tr>\n            )\n          })}\n        </tbody>\n      </table>\n    </div>\n  )\n}\n","import { useCallback, useEffect, useState } from 'react'\nimport type { HotkeyMap } from './useHotkeys'\nimport { useHotkeys } from './useHotkeys'\nimport { formatCombination, parseCombinationId } from './utils'\n\nexport interface ShortcutGroup {\n  name: string\n  shortcuts: Array<{ key: string; action: string; description?: string }>\n}\n\nexport interface ShortcutsModalProps {\n  /** The hotkey map to display */\n  keymap: HotkeyMap\n  /** Descriptions for actions (action name -> description) */\n  descriptions?: Record<string, string>\n  /** Group definitions (if omitted, actions are grouped by prefix before ':') */\n  groups?: Record<string, string>\n  /** Control visibility externally */\n  isOpen?: boolean\n  /** Called when modal should close */\n  onClose?: () => void\n  /** Hotkey to open modal (default: '?') */\n  openKey?: string\n  /** Whether to auto-register the open hotkey (default: true) */\n  autoRegisterOpen?: boolean\n  /** Custom render function for the modal content */\n  children?: (props: { groups: ShortcutGroup[]; close: () => void }) => React.ReactNode\n  /** CSS class for the backdrop */\n  backdropClassName?: string\n  /** CSS class for the modal container */\n  modalClassName?: string\n}\n\n/**\n * Parse action name to extract group.\n * e.g., \"metric:temp\" -> { group: \"metric\", action: \"temp\" }\n */\nfunction parseAction(action: string): { group: string; name: string } {\n  const colonIndex = action.indexOf(':')\n  if (colonIndex > 0) {\n    return { group: action.slice(0, colonIndex), name: action.slice(colonIndex + 1) }\n  }\n  return { group: 'General', name: action }\n}\n\n/**\n * Organize keymap into groups for display.\n */\nfunction organizeShortcuts(\n  keymap: HotkeyMap,\n  descriptions?: Record<string, string>,\n  groupNames?: Record<string, string>,\n): ShortcutGroup[] {\n  const groupMap = new Map<string, ShortcutGroup>()\n\n  for (const [key, actionOrActions] of Object.entries(keymap)) {\n    const actions = Array.isArray(actionOrActions) ? actionOrActions : [actionOrActions]\n\n    for (const action of actions) {\n      const { group: groupKey, name } = parseAction(action)\n      const groupName = groupNames?.[groupKey] ?? groupKey\n\n      if (!groupMap.has(groupName)) {\n        groupMap.set(groupName, { name: groupName, shortcuts: [] })\n      }\n\n      groupMap.get(groupName)!.shortcuts.push({\n        key,\n        action,\n        description: descriptions?.[action] ?? name,\n      })\n    }\n  }\n\n  // Sort groups: \"General\" last, others alphabetically\n  return Array.from(groupMap.values()).sort((a, b) => {\n    if (a.name === 'General') return 1\n    if (b.name === 'General') return -1\n    return a.name.localeCompare(b.name)\n  })\n}\n\n/**\n * Modal component for displaying keyboard shortcuts.\n *\n * @example\n * ```tsx\n * <ShortcutsModal\n *   keymap={HOTKEYS}\n *   descriptions={{ 'metric:temp': 'Switch to temperature view' }}\n * />\n * ```\n */\nexport function ShortcutsModal({\n  keymap,\n  descriptions,\n  groups: groupNames,\n  isOpen: controlledIsOpen,\n  onClose,\n  openKey = '?',\n  autoRegisterOpen = true,\n  children,\n  backdropClassName,\n  modalClassName,\n}: ShortcutsModalProps) {\n  const [internalIsOpen, setInternalIsOpen] = useState(false)\n  const isOpen = controlledIsOpen ?? internalIsOpen\n\n  const close = useCallback(() => {\n    setInternalIsOpen(false)\n    onClose?.()\n  }, [onClose])\n\n  const open = useCallback(() => {\n    setInternalIsOpen(true)\n  }, [])\n\n  // Register open/close hotkeys\n  const modalKeymap = autoRegisterOpen ? { [openKey]: 'openShortcuts' } : {}\n  useHotkeys(\n    { ...modalKeymap, escape: 'closeShortcuts' },\n    {\n      openShortcuts: open,\n      closeShortcuts: close,\n    },\n    { enabled: autoRegisterOpen || isOpen },\n  )\n\n  // Close on backdrop click\n  const handleBackdropClick = useCallback(\n    (e: React.MouseEvent) => {\n      if (e.target === e.currentTarget) {\n        close()\n      }\n    },\n    [close],\n  )\n\n  // Organize shortcuts into groups\n  const shortcutGroups = organizeShortcuts(keymap, descriptions, groupNames)\n\n  if (!isOpen) return null\n\n  // Custom render\n  if (children) {\n    return <>{children({ groups: shortcutGroups, close })}</>\n  }\n\n  // Default render\n  return (\n    <div\n      className={backdropClassName}\n      onClick={handleBackdropClick}\n      style={\n        backdropClassName\n          ? undefined\n          : {\n              position: 'fixed',\n              inset: 0,\n              backgroundColor: 'rgba(0, 0, 0, 0.5)',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              zIndex: 9999,\n            }\n      }\n    >\n      <div\n        className={modalClassName}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        aria-label=\"Keyboard shortcuts\"\n        style={\n          modalClassName\n            ? undefined\n            : {\n                backgroundColor: 'white',\n                borderRadius: '8px',\n                padding: '24px',\n                maxWidth: '600px',\n                maxHeight: '80vh',\n                overflow: 'auto',\n                boxShadow: '0 4px 20px rgba(0, 0, 0, 0.15)',\n              }\n        }\n      >\n        <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: '16px' }}>\n          <h2 style={{ margin: 0, fontSize: '1.25rem', fontWeight: 600 }}>Keyboard Shortcuts</h2>\n          <button\n            onClick={close}\n            aria-label=\"Close\"\n            style={{\n              background: 'none',\n              border: 'none',\n              fontSize: '1.5rem',\n              cursor: 'pointer',\n              padding: '4px',\n              lineHeight: 1,\n            }}\n          >\n            ×\n          </button>\n        </div>\n\n        {shortcutGroups.map((group) => (\n          <div key={group.name} style={{ marginBottom: '16px' }}>\n            <h3 style={{ margin: '0 0 8px', fontSize: '0.875rem', fontWeight: 600, textTransform: 'uppercase', color: '#666' }}>\n              {group.name}\n            </h3>\n            <dl style={{ margin: 0 }}>\n              {group.shortcuts.map(({ key, action, description }) => {\n                const combo = parseCombinationId(key)\n                const display = formatCombination(combo)\n                return (\n                  <div\n                    key={action}\n                    style={{ display: 'flex', justifyContent: 'space-between', padding: '4px 0', borderBottom: '1px solid #eee' }}\n                  >\n                    <dt style={{ color: '#333' }}>{description}</dt>\n                    <dd style={{ margin: 0, fontFamily: 'monospace', color: '#666' }}>\n                      <kbd style={{ backgroundColor: '#f5f5f5', padding: '2px 6px', borderRadius: '4px', border: '1px solid #ddd' }}>\n                        {display.display}\n                      </kbd>\n                    </dd>\n                  </div>\n                )\n              })}\n            </dl>\n          </div>\n        ))}\n      </div>\n    </div>\n  )\n}\n"]}